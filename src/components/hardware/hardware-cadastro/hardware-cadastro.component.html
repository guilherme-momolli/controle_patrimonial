<div class="container mt-4"> 

  <div *ngIf="successMessage" class="alert alert-success text-center">{{ successMessage }}</div>
  <div *ngIf="errorMessage" class="alert alert-danger text-center">{{ errorMessage }}</div>

  <form [formGroup]="hardwareForm" (ngSubmit)="submitForm($event)" class="bg-dark text-light p-4 rounded shadow">
    <fieldset>
      <legend class="text-primary">Dados do Hardware</legend>

      <div class="container mt-4">
        <h2 class="text-center mb-4">Cadastro de Hardware</h2>
      
        <div *ngIf="successMessage" class="alert alert-success text-center">{{ successMessage }}</div>
        <div *ngIf="errorMessage" class="alert alert-danger text-center">{{ errorMessage }}</div>
      
        <form [formGroup]="hardwareForm" (ngSubmit)="submitForm($event)" class="bg-dark text-light p-4 rounded shadow">
          <fieldset [disabled]="isSubmitting">
      
            <div class="row">
              <div class="col-md-6 col-sm-12 mb-3">
                <label for="codigoPatrimonial" class="form-label">Código Patrimonial</label>
                <input id="codigoPatrimonial" formControlName="codigoPatrimonial" type="text" class="form-control">
              </div>
      
              <div class="col-md-6 col-sm-12 mb-3">
                <label for="componente" class="form-label">Componente</label>
                <select id="componente" formControlName="componente" class="form-select">
                  <option *ngFor="let item of componentes" [value]="item">{{ item }}</option>
                </select>
                <div *ngIf="hardwareForm.get('componente')?.invalid && hardwareForm.get('componente')?.touched" class="text-danger">
                  Componente é obrigatório.
                </div>
              </div>
      
              <div class="col-md-6 col-sm-12 mb-3">
                <label for="numeroSerial" class="form-label">Número Serial</label>
                <input id="numeroSerial" formControlName="numeroSerial" type="text" class="form-control">
              </div>
      
              <div class="col-md-6 col-sm-12 mb-3">
                <label for="modelo" class="form-label">Modelo</label>
                <input id="modelo" formControlName="modelo" type="text" class="form-control">
                <div *ngIf="hardwareForm.get('modelo')?.invalid && hardwareForm.get('modelo')?.touched" class="text-danger">
                  Modelo é obrigatório.
                </div>
              </div>
      
              <div class="col-md-6 col-sm-12 mb-3">
                <label for="fabricante" class="form-label">Fabricante</label>
                <input id="fabricante" formControlName="fabricante" type="text" class="form-control">
                <div *ngIf="hardwareForm.get('fabricante')?.invalid && hardwareForm.get('fabricante')?.touched" class="text-danger">
                  Fabricante é obrigatório.
                </div>
              </div>
      
              <div class="col-md-6 col-sm-12 mb-3">
                <label for="velocidade" class="form-label">Velocidade (GHz)</label>
                <input id="velocidade" formControlName="velocidade" type="number" step="0.1" class="form-control">
              </div>
      
              <div class="col-md-6 col-sm-12 mb-3">
                <label for="capacidadeArmazenamento" class="form-label">Capacidade de Armazenamento (GB)</label>
                <input id="capacidadeArmazenamento" formControlName="capacidadeArmazenamento" type="number" class="form-control">
              </div>
      
              <div class="col-md-6 col-sm-12 mb-3">
                <label for="precoTotal" class="form-label">Preço Total (R$)</label>
                <input id="precoTotal" formControlName="precoTotal" type="number" min="0" step="0.01" class="form-control">
                <div *ngIf="hardwareForm.get('precoTotal')?.invalid && hardwareForm.get('precoTotal')?.touched" class="text-danger">
                  Preço é obrigatório e deve ser positivo.
                </div>
              </div>
      
              <div class="col-md-6 col-sm-12 mb-3">
                <label for="estatus" class="form-label">Status</label>
                <select id="estatus" formControlName="estatus" class="form-select">
                  <option *ngFor="let status of estatusList" [value]="status">{{ status }}</option>
                </select>
                <div *ngIf="hardwareForm.get('estatus')?.invalid && hardwareForm.get('estatus')?.touched" class="text-danger">
                  Status é obrigatório.
                </div>
              </div>
      
              <!-- <div class="col-md-6 col-sm-12 mb-3">
                <label for="imagem" class="form-label">Foto do Hardware</label>
                <input id="imagem" type="file" (change)="onFileChange($event)" accept="image/png, image/jpeg" class="form-control">
                <div *ngIf="imagemInvalida" class="text-danger">
                  Formato inválido! Apenas arquivos JPG ou PNG são permitidos.
                </div>
                <div *ngIf="imagemArquivo && imagemArquivo.size > 5 * 1024 * 1024" class="text-danger">
                  O arquivo deve ter no máximo 5MB.
                </div>
              </div>
      
              <div class="col-md-6 col-sm-12 mb-3" *ngIf="imagemPreview">
                <label class="form-label">Pré-visualização</label>
                <img [src]="imagemPreview" class="img-fluid rounded border shadow" alt="Pré-visualização da imagem">
              </div> -->
            </div>
      
            <div class="d-flex justify-content-between">

              <button type="submit" class="btn btn-success" [disabled]="isSubmitting || hardwareForm.invalid">
                <span *ngIf="isSubmitting" class="spinner-border spinner-border-sm me-2"></span>
                Cadastrar
              </button>
              <button type="button" class="btn btn-primary" (click)="navigateTo('/hardware_list')">Listar Hardware</button>
            </div>
      
          </fieldset>
        </form>
      </div>